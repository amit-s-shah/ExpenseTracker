!function(){"use strict";function e(e,t){e.when("/",{templateUrl:"js/spa/home/index.html",controller:"homeCtrl",controllerAs:"homeCtl"}).when("/billers",{templateUrl:"js/spa/biller/index.html",controller:"billerCtrl",resolve:{previousState:n}}).when("/categories",{templateUrl:"js/spa/category/indexCategory.html",controller:"indexCategoryCtrl",controllerAs:"categoryCtrl",resolve:{previousState:n}}).when("/login",{templateUrl:"js/spa/User/login.html",controller:"loginCtrl",controllerAs:"loginCtrl"}).when("/Registration/",{templateUrl:"js/spa/User/UserRegistration.html",controller:"userRegCtrl",controllerAs:"regCtrl"}).when("/ExpenseEntry/",{templateUrl:"js/spa/Expense/Expenses.html",controller:"indexExpenseCtrl",controllerAs:"indexCtrl",resolve:{paymentMethods:function(e){return e.paymentPromise()},categories:function(e){return e.categoryPromise()},billers:function(e){return e.billerPromise()}}}).otherwise({redirectTo:"/"}),t.theme("default").primaryPalette("light-blue").accentPalette("grey"),t.theme("errorTheme").backgroundPalette("red")}function t(e,t){e.repository=t.get("repository")||{}}function n(e,t){e.previousPath=t.path()}angular.module("ExpenseTracker",["common.core","common.ui"]).config(e).run(t),e.$inject=["$routeProvider","$mdThemingProvider"],t.$inject=["$rootScope","$cookieStore"],n.$inject=["$rootScope","$location"]}(),function(e){"use strict";function t(e,t,n){function r(){console.log(l.newBiller),t.postData("/Biller/Add/",l.newBiller,a,i)}function o(){e.cancel()}function a(t){n.displaySuccess(l.newBiller.name+" has been added"),l.newBiller.id=t.data,e.hide(l.newBiller)}function i(e){n.displayError(e.data)}var l=this;l.addBiller=r,l.cancelAddBiller=o}e.controller("billerAddCtrl",t),t.$inject=["$mdDialog","apiService","notificationService"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n,r,o){function a(){n.getData("/Biller/GET",null,i,l)}function i(t){e.billers=t.data,e.loadingBillers=!1}function l(e){r.displayError(e.data)}function c(t){t=t||0,e.loadingBillers=!0;var r={params:{page:t,pageSize:20,filter:e.filterBillers}};n.getData("/Biller/Search/",r,u,l)}function s(){e.filterBillers="",c()}function u(t){e.billers=t.data.items,e.page=t.data.Page,e.pagesCount=t.data.TotalPages,e.totalCount=t.data.TotalCount,e.loadingBillers=!1,e.filterBillers&&e.filterBillers.length&&r.displayInfo(t.data.items.length+" billers found")}function d(n,r){e.selectedBiller=n,t.show({templateUrl:"js/spa/Biller/editBillerModal.html",controller:"billerEditCtrl",controllerAs:"billerCtrl",targetEvent:r,locals:{selectedBiller:n},bindToController:!0,closeTo:r.target}).then(function(){s()},function(){})}function p(n){t.show({templateUrl:"js/spa/Biller/addBillerModal.html",controller:"billerAddCtrl",controllerAs:"billerCtrl",parent:angular.element(document.body),targetEvent:n,clickOutsideToClose:!0}).then(function(t){e.billers.push(t)},function(){})}function f(n){var r="";e.billerSelectedForDelete=o("filter")(e.billers,{selected:!0});for(var a=e.billerSelectedForDelete.length-1,i=0;i<e.billerSelectedForDelete.length;i++)i==a?r+=e.billerSelectedForDelete[i].name:r=r+e.billerSelectedForDelete[i].name+", ";var l=t.confirm().title("sure , wanna delete following billers?").textContent(r).ariaLabel("Lucky day").targetEvent(n).ok("Delete").cancel("Cancel");t.show(l).then(function(){h(e.billerSelectedForDelete)},function(){})}function g(){var t=o("filter")(e.billers,{selected:!0});return"undefined"==t?0:0==t.length}function h(e){n.postData("/Biller/Delete/",e,m,y)}function m(t){r.displaySuccess("Selected biller(s) has been deleted"),e.billerSelectedForDelete=[],c()}function y(e){r.displayError(response.data)}e.pageClass="page-home",e.loadingBillers=!0,e.isReadOnly=!0,e.billers=[],e.loadData=a,e.page=0,e.pagesCount=0,e.search=c,e.clearSearch=s,e.openEditDialog=d,e.openAddDialog=p,e.openDeleteDialog=f,e.anythingSelectedForDelete=g,c()}e.controller("billerCtrl",t),t.$inject=["$scope","$mdDialog","apiService","notificationService","$filter"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n){function r(){t.postData("/Biller/Update/",l.selectedBiller,a,i)}function o(){e.cancel()}function a(t){n.displaySuccess(l.selectedBiller.name+" has been updated"),l.selectedBiller={},e.hide()}function i(e){n.displayError(e.data)}var l=this;l.UpdateBiller=r,l.CancelUpdateBiller=o}e.controller("billerEditCtrl",t),t.$inject=["$mdDialog","apiService","notificationService"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n,r){function o(){var e={params:{filter:h.filterCategory}};t.getData("/Category/Search/",e,a,i)}function a(e){h.categories=e.data,h.filterCategory&&h.filterCategory.length&&n.displayInfo(e.data.length+" categories found")}function i(e){n.displayError(e.data)}function l(){h.filterCategory="",o()}function c(t,n){e.show({templateUrl:"js/spa/category/editCategory.html",controller:"editCategoryCtrl",controllerAs:"editCtr",clickOutsideToClose:!0,targetEvent:n,locals:{selectedCategory:t},bindToController:!0,closeTo:n.target}).then(function(){},function(){})}function s(t){e.show({templateUrl:"js/spa/category/addCategory.html",controller:"addCategoryCtrl",controllerAs:"addCtr",clickOutsideToClose:!0,targetEvent:t,closeTo:t.target}).then(function(e){h.categories.push(e)},function(){})}function u(t){for(var n="",o=r("filter")(h.categories,{selected:!0}),a=o.length-1,i=0;i<o.length;i++)i==a?n+=o[i].name:n=n+o[i].name+", ";var l=e.confirm().title("sure , wanna delete following categories?").textContent(n).ariaLabel("Lucky day").targetEvent(t).ok("Delete").cancel("Cancel");e.show(l).then(function(){d(o)},function(){})}function d(e){t.postData("category/delete/",e,p,f)}function p(e){n.displaySuccess("Selected categories are deleted"),o()}function f(e){n.displayError(e.data)}function g(){var e=r("filter")(h.categories,{selected:!0});return"undefined"==e?0:0==e.length}var h=this;h.categories=[],h.search=o,h.clearSearch=l,h.openEditDialog=c,h.openAddDialog=s,h.openDeleteDialog=u,h.anythingSelectedForDelete=g,o()}e.controller("indexCategoryCtrl",t),t.$inject=["$mdDialog","apiService","notificationService","$filter"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n){function r(){console.log(l.newCategory),e.postData("/category/Add/",l.newCategory,o,a)}function o(e){t.displaySuccess(l.newCategory.name+" has been added"),l.newCategory.id=e.data,n.hide(l.newCategory)}function a(e){t.displayError(e.data)}function i(){l.newCategory={},n.cancel()}var l=this;l.newCategory={},l.addCategory=r,l.cancelAddCategory=i}e.controller("addCategoryCtrl",t),t.$inject=["apiService","notificationService","$mdDialog"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n){function r(){e.postData("/category/edit/",l.selectedCategory,o,a)}function o(e){t.displaySuccess(l.selectedCategory.name+" category has been updated"),n.hide()}function a(e){t.displayError(e.data),n.cancel()}function i(){n.cancel()}var l=this;l.saveCategory=r,l.cancelSaveCategory=i}e.controller("editCategoryCtrl",t),t.$inject=["apiService","notificationService","$mdDialog"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n){function r(t){return e.querySearch(u.billers,t)}function o(t){return e.querySearch(u.categories,t)}function a(t){return e.querySearch(u.paymentMethods,t)}function i(){angular.forEach(u.originalExpense,function(e,t){this[t]=e},u.expense)}function l(){i(),t.cancel()}function c(){e.editExpense(u.expense,s,null)}function s(e){e.data&&(n.displaySuccess(u.expense.name+"is updated"),t.hide(u.expense))}var u=this;u.originalExpense=angular.copy(this.expense),u.title="Edit "+this.originalExpense.name,u.querySearchBiller=r,u.querySearchCategory=o,u.querySearchPaymentMethod=a,u.reset=i,u.cancel=l,u.saveExpense=c}e.controller("editExpenseCtrl",t),t.$inject=["expenseService","$mdDialog","notificationService"]}(angular.module("ExpenseTracker")),function(e){function t(e,t,n,r){function o(){p.expense={},p.expense.purchaseddate=p.purchaseddate}function a(){r.cancel()}function i(){e.addExpense(p.expense,l,c)}function l(e){e.data>0?(t.displaySuccess(p.expense.name+" is saved"),p.expense.id=e.data,r.hide(p.expense)):t.displayError(p.expense.name+" is not saved.")}function c(e){t.displayError(e.data)}function s(t){return e.querySearch(p.billers,t)}function u(t){return e.querySearch(p.categories,t)}function d(t){return e.querySearch(p.paymentMethods,t)}var p=this;p.expense={},p.expense.purchaseddate=this.purchaseddate,p.querySearchBiller=s,p.querySearchCategory=u,p.querySearchPaymentMethod=d,p.reset=o,p.cancel=a,p.saveExpense=i}e.controller("expenseEntryCtrl",t),t.$inject=["expenseService","notificationService","$filter","$mdDialog"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n,r,o,a,i){function l(){m.filterExpense="",c()}function c(){e.getExpenses(m.purchaseddate,s,null)}function s(e){m.expenses=e.data}function u(){var e=i("filter")(m.expenses,{selected:!0});return"undefined"==e?0:0==e.length}function d(e){o.show({templateUrl:"js/spa/expense/AddExpenses.html",controller:"expenseEntryCtrl",controllerAs:"expenseCtrl",targetEvent:e,locals:{categories:m.categories,paymentMethods:m.paymentMethods,billers:m.billers,purchaseddate:m.purchaseddate},bindToController:!0,closeTo:e.target}).then(function(e){m.expenses.push(e)},function(){})}function p(e,t){o.show({templateUrl:"js/spa/expense/editExpense.html",controller:"editExpenseCtrl",controllerAs:"expenseCtrl",targetEvent:t,locals:{categories:m.categories,paymentMethods:m.paymentMethods,billers:m.billers,expense:e},bindToController:!0,closeTo:t.target,escapeToClose:!1}).then(function(e){var t=i("filter")(m.expenses,{id:e.id});t=e},function(){})}function f(e){for(var t="",n=i("filter")(m.expenses,{selected:!0}),r=n.length-1,a=0;a<n.length;a++)a==r?t+=n[a].name:t=t+n[a].name+", ";var l=o.confirm().title("sure , wanna delete following items?").textContent(t).ariaLabel("Lucky day").targetEvent(e).ok("Delete").cancel("Cancel");o.show(l).then(function(){g(n)},function(){})}function g(t){e.deleteExpenses(t,h,null)}function h(e){a.displaySuccess("Selected expense(s) has been deleted"),c()}var m=this;m.title="Expenses",m.purchaseddate=new Date,m.expenses=[],m.categories=n.data,m.paymentMethods=t.data,m.billers=r.data,m.openAddDialog=d,m.getExpenses=c,m.anythingSelectedForDelete=u,m.openEditDialog=p,m.openDeleteDialog=f,m.clearSearch=l,c()}e.controller("indexExpenseCtrl",t),t.$inject=["expenseService","paymentMethods","categories","billers","$mdDialog","notificationService","$filter"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e){function t(){var t={params:{category:c.selectedCategory}};e.getData("ExpenseChart/GetAllExpense",t,n,null)}function n(e){c.labels=e.data.labels,c.series=e.data.series,c.data=e.data.data,c.barResponse=e.data}function r(){e.getData("ExpenseChart/GetDataForPieChart",null,o,null)}function o(e){c.pieLabels=e.data.labels,c.pieData=e.data.data[0],c.pieResponse=e.data,c.summary=e.data.summary}function a(){var t={params:{filter:""}};e.getData("/Category/Search/",t,i,l)}function i(e){var t={name:"--All--",id:0};c.categories=e.data,c.categories.unshift(t)}function l(e){notificationService.displayError(e.data)}var c=this;c.title="Expense Summary",c.barResponse={},c.pieResponse={},c.labels=[],c.series=[],c.data=[],c.GetAllExpense=t,c.GetDataForPieChart=r,t(),r(),a()}e.controller("homeCtrl",t),t.$inject=["apiService"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n,r){function o(){n.getData("/Biller/GET",null,a,i)}function a(t){e.billers=t.data,e.loadingBillers=!1}function i(e){r.displayError(e.data)}e.pageClass="page-home",e.loadingBillers=!0,e.isReadOnly=!0,e.billers=[],e.loadData=o,o()}e.controller("indexCtrl",t),t.$inject=["$scope","$location","apiService","notificationService"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e){function t(){i.userData=e.getUserDetails()}function n(){return t(),e.isUserloggedIn()}function r(){e.logout(null,o,a)}function o(){}function a(){}var i=this;i.userData={},i.displayUserInfo=t,i.isUserloggedIn=n,i.logout=r}e.controller("rootCtrl",t),t.$inject=["accountMangement"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(){return{scope:{page:"@",pagesCount:"@",totalCount:"@",searchFunc:"&",customPath:"@"},replace:!0,restrict:"E",templateUrl:"/js/spa/layout/pager.html",controller:["$scope",function(e){e.search=function(t){e.searchFunc&&e.searchFunc({page:t})},e.range=function(){if(!e.pagesCount)return[];var t=2,n=2*t,r=Math.max(0,e.page-t),o=r+1+n;o>e.pagesCount&&(o=e.pagesCount);for(var a=[],i=r;i!=o;++i)a.push(i);return a},e.pagePlus=function(t){return+e.page+t}}]}}e.directive("customPager",t)}(angular.module("common.ui")),function(e){"use strict";function t(){var e={restrict:"E",replace:!0,templateUrl:"/js/spa/layout/sideBar.html"};return e}e.directive("sideBar",t)}(angular.module("common.ui")),function(e){"use strict";function t(){var e={restrict:"E",replace:!0,templateUrl:"/js/spa/layout/topBarMaterial.html"};return e}e.directive("topBar",t)}(angular.module("common.ui")),function(){"use strict";angular.module("common.core",["ngRoute","ngCookies"])}(),function(){"use strict";angular.module("common.ui",["ngMaterial","chart.js"])}(),function(e){"use strict";function t(e,t,n){function r(t,n,r){e.postData("Account/loginAsync",t,n,r)}function o(t,n,r){i(),e.postData("Account/logoutAsync",t,n,r)}function a(e){n.repository={loggedUser:{userName:e.userName}},t.put("repository",n.repository)}function i(){n.repository={},t.remove("repository")}function l(){return n.repository.loggedUser}function c(){return null==n.repository?!1:null!=n.repository.loggedUser}var s={login:r,logout:o,saveUserDetails:a,removeUserDetails:i,getUserDetails:l,isUserloggedIn:c};return s}e.factory("accountMangement",t),t.$inject=["apiService","$cookieStore","$rootScope"]}(angular.module("common.core")),function(e){"use strict";function t(e,t,n,r){function o(o,a,l,c){return e.get(o,a).then(function(e){l(e)},function(e){"401"==e.status?(n.displayError("Authentication Required"),r.previousState=t.path(),t.path("/login")):null!=c?c(e):i(e)})}function a(o,a,l,c){return e.post(o,a).then(function(e){l(e)},function(e){"401"==e.status?(n.displayError("Authentication Required"),r.previousState=t.path(),t.path("/login")):null!=c?c(e):i(e)})}function i(e){n.displayError(e.data)}var l={getData:o,postData:a};return l}e.factory("apiService",t),t.$inject=["$http","$location","notificationService","$rootScope"]}(angular.module("common.core")),function(e){"use strict";function t(e,t){function n(){var t=e.get("/PaymentMethod/GetAll/").success(function(e){return e});return t}function r(){var t=e.get("/Category/Search/").success(function(e){return e});return t}function o(){var t=e.get("/Biller/Get/").success(function(e){return e});return t}function a(e,n,r){e.categoryId=e.category.id,e.billerId=e.biller.id,e.paymentMethodId=e.paymentMethod.id,t.postData("/ExpenseItem/AddExpese",e,n,r)}function i(e,n,r){var o={params:{purchaseddate:e}};t.getData("/ExpenseItem/GetExpenses",o,n,r)}function l(e,n,r){e.categoryId=e.category.id,e.billerId=e.biller.id,e.paymentMethodId=e.paymentMethod.id,t.postData("/ExpenseItem/EditExpese",e,n,r)}function c(e,n,r){t.postData("/ExpenseItem/DeleteExpese/",e,n,r)}function s(e,t){var n=t?e.filter(u(t)):e;return n}function u(e){var t=angular.lowercase(e);return function(e){return angular.lowercase((e.name||"")+(e.address||"")+(e.description||"")).indexOf(t)>-1}}var d={paymentPromise:n,categoryPromise:r,billerPromise:o,querySearch:s,addExpense:a,getExpenses:i,editExpense:l,deleteExpenses:c};return d}e.factory("expenseService",t),t.$inject=["$http","apiService"]}(angular.module("common.core")),function(e){"use strict";function t(e){function t(t){e.show(e.simple().textContent(t).capsule(!0).hideDelay(3e3).position("bottom right").theme("errorTheme"))}function n(t){e.show(e.simple().textContent(t).capsule(!0).position("bottom right"))}function r(t){e.show(e.simple().textContent(t).capsule(!0).hideDelay(3e3).position("bottom right"))}function o(t){e.show(e.simple().textContent(t).capsule(!0).hideDelay(3e3).position("bottom right"))}var a={displaySuccess:t,displayError:n,displayWarning:r,displayInfo:o};return a}e.factory("notificationService",t),t.$inject=["$mdToast"]}(angular.module("common.ui")),function(e){"use strict";function t(e,t,n,r){function o(){e.login(l.user,a,i)}function a(o){o.data?(e.saveUserDetails(l.user),t.displaySuccess(l.user.userName+" is logged in"),n.previousPath?(r.path(n.previousPath),n.previousPath=""):r.path("/")):t.displayError("Invalid user name or password")}function i(e){t.displayError(e.data)}var l=this;l.login=o}e.controller("loginCtrl",t),t.$inject=["accountMangement","notificationService","$rootScope","$location"]}(angular.module("ExpenseTracker")),function(e){"use strict";function t(e,t,n){function r(){e.postData("Account/register",i.user,o,a)}function o(e){t.displaySuccess(i.user.username+" is registered."),n.path("/login")}function a(e){t.displayError(e.data)}var i=this;i.register=r}e.controller("userRegCtrl",t),t.$inject=["apiService","notificationService","$location"]}(angular.module("ExpenseTracker"));